---
title: "EDA_dplyr"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

Setting up R studio

Addins:
<https://statsandr.com/blog/tips-and-tricks-in-rstudio-and-r-markdown/#pander-and-report-for-aesthetics>
- pander
- report
- esquisse
- equatiomatic

## Useful links for EDA

see links:

<https://cran.r-project.org/web/packages/DataExplorer/vignettes/dataexplorer-intro.html)>
<https://cran.r-project.org/web/packages/sjmisc/vignettes/exploringdatasets.html>
<https://datacarpentry.org/R-genomics/04-dplyr.html> 
<https://www.guru99.com/r-dplyr-tutorial.html>
<https://easystats.github.io/report/reference/report.html>


Tidyverse is group of R packages


EDA:

dplyr : For data cleaning and manipulation
tidyr : For data transformations- reshaping data
<https://www.rdocumentation.org/packages/tidyr/versions/1.2.0>
<https://tidyr.tidyverse.org/reference/nest.html#:~:text=Nesting%20creates%20a%20list%2Dcolumn,whole%20datasets%2C%20most%20notably%20models.>




## Data manipulation and cleaning with dplyr
```{r}

# left_join(), right_join(), semi_join(), anti_join(), inner_join(), full_join(),

# select(), filter(), mutate(), group_by(), and summarize(), arrange()

# apply() lapply() sapply() tapply()

# melt() cast()

```


## Data transformations using tidyr
```{r}

# gather()     : Transform the data from wide to long.
# spread()     : Transform the data from long to wide.
# separate()   : Split one variable into two.
# unite()      : Unit two variables into one.

# nest()
# unnest()

```


##
```{r}


library(report)

model <- t.test(mpg ~ am, data = mtcars)

report(model)

r <- report(model)

as.data.frame(r)

summary(as.data.frame((r)))

```




```{r}

library(dplyr)
library(tidyr)
library(reshape)
library(skimr)
library(DataExplorer)

library(survival)

```


```{r}

data <- as.data.frame(lung)

names(data)

names(data[1:5])

colnames(data)

class(data)

str(data)

```

# Data transformation
```{r}

data$sex <- as.factor(data$sex)

levels(data$sex) <- c('M','F')

data$sex <- as.character(data$sex)

str(data)

```


# Contigency table
```{r}

x1<-table(data$sex, data$ph.ecog)

x1

y1<-prop.table(x1)

y1

rowSums(y1)
colSums(y1)

z1<-prop.table(x1,1)

z1

rowSums(z1)
colSums(z1)

```

# Rearranging rows
```{r}

data[order(data$sex, data$status, data$age),]

```


```{r}

rasters <- data.frame(pd_id = c(1,2,3,1,2,3,2,2,2,2),
                      nvisits = c(1,1,1,2,2,2,3,4,5,6),
                      dose = c(1.4,1.2,1.6,1,2,2.5,3.3,3.3,3.3,3.3),
                      resp = c('NR','NR','NR','CR','NR','NR','PR','PR','PR','CR') 
                      )


rasters

rast <- cast(rasters, formula = as.formula(paste('pd_id','~','nvisits')), value = 'resp')

rast


```


```{r}



distinct(data[,c('sex','age','ph.ecog')])

unique(data[,c('sex')])


data%>%group_by('sex')

```


```{r}

data <- datasets::esoph


# select(), filter(), mutate(), group_by(), and summarize(), arrange()

s1 <- data%>%select(c(agegp, ncontrols, ncases))%>%filter(ncontrols>20)

s2 <- s1%>%group_by(agegp)%>%arrange(agegp)
s3 <- s1%>%group_by(agegp, ncases)



```

```{r avaliable_datasets}


starwars <- dplyr::starwars

library(nycflights13)
data_list <- list(airlines, airports, flights, planes, weather, starwars)

#first_dataframe <- data_list[[1]]

```


```{r}

#plot_str(data_list)

#DataExplorer::plot_scatterplot(data_list)

```


```{r starwars}




head(starwars)

```

## See data
```{r}

# dplyr
data <- glimpse(starwars)

```


```{r}

# r function
#summary(starwars)

```
```{r}

#summary(datast)

```

```{r}
#install.packages("skimr")

skim(starwars)

```

## Creating report using Dataexplorer
```{r}


vector <- c('satya','applying',88.75)
# 
# for (x in vector) {
#   print(x)
# 
# }

#create_report(starwars[2:3])

paste0(vector, sep = ",")

```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
#plot(dataset$height)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
